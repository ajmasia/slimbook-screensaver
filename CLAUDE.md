# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Terminal-based screensaver for Debian/Ubuntu + GNOME that displays ASCII art with animated text effects using the [Terminal Text Effects (tte)](https://github.com/ChrisBuilds/terminaltexteffects) library. Adapted from [Omarchy](https://omarchy.org).

## Project Structure

```
terminal-screensaver/
├── src/                              # Application scripts
│   ├── screensaver-multimonitor.py   # GTK4/VTE screensaver (main)
│   ├── screensaver-launch.sh         # Entry point launcher
│   ├── screensaver-toggle.sh         # Enable/disable toggle
│   ├── screensaver-update.sh         # Update script
│   └── screensaver.conf              # Config loader with defaults
├── assets/                           # Resources
│   ├── banner.txt                    # Default ASCII art
│   ├── banner_debian.txt             # Debian logo
│   ├── banner_trixie.txt             # Debian Trixie text
│   └── screensaver.conf.example      # Example configuration
├── scripts/                          # Installation scripts
│   ├── install.sh                    # Installer (local/remote)
│   └── uninstall.sh                  # Uninstaller
├── VERSION
├── LICENSE
├── README.md
└── CLAUDE.md
```

## Commands

```bash
# Install (requires sudo for apt packages)
./scripts/install.sh

# Run screensaver manually
terminal-screensaver

# Toggle screensaver on/off
terminal-screensaver-toggle

# Update to latest version
terminal-screensaver-update

# Uninstall
terminal-screensaver-uninstall
```

## Architecture

The screensaver uses GTK4 and VTE for display, with Python for effects:

- **src/screensaver-multimonitor.py**: Main GTK4/VTE application that:
  - Detects all connected monitors automatically
  - Creates a fullscreen VTE terminal window on each monitor
  - Runs random `tte` effects on each screen
  - Exits on keypress, mouse movement, or session lock
- **src/screensaver-launch.sh**: Entry point that loads config and launches the Python app
- **src/screensaver-toggle.sh**: Creates/removes state file to enable/disable automatic activation
- **src/screensaver.conf**: Configuration loader with defaults
- **idle-monitor.sh** (generated by install.sh): Polls GNOME's Mutter IdleMonitor via D-Bus

## Key Integration Points

- Uses GTK4 with VTE for terminal display (no external terminal needed)
- Automatic multimonitor support
- GNOME integration via D-Bus calls to `org.gnome.Mutter.IdleMonitor` and `org.gnome.ScreenSaver`
- Config in `~/.config/terminal-screensaver/`
- State in `~/.local/state/terminal-screensaver/`
- Installed to `~/.local/share/terminal-screensaver/`

## Dependencies

- Python 3.8+ with `terminaltexteffects`
- GTK4 with VTE bindings (`gir1.2-vte-3.91`)
- System packages: `jq`, `curl`
